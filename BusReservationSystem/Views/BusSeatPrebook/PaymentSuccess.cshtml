@model UserData.Core.Model.DownloadTicket
@{
    int i = 0;
    string message = TempData["Message"] != null ? TempData["Message"].ToString() : string.Empty;
}
<head>

    <link rel="stylesheet" href="//cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>

</head>
<style>
    .logoutLblPos {
        position: fixed;
        right: 50px;
        top: 20px;
    }

    body.signup {
        background: url(/Images/Signup.jpg) no-repeat;
        background-size: cover;
    }

    .dataTables_wrapper .dataTables_length, .dataTables_wrapper .dataTables_filter, .dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_processing, .dataTables_wrapper .dataTables_paginate {
        color: white;
        margin: 10px;
        font-weight: 900;
    }

    .info {
        margint-left: 50%;
    }

    tbody, td, tfoot, th, thead, tr {
        border-color: black;
    }

    thead {
        background-color: lightcyan;
        height: auto;
    }

    tbody {
        background-color: white;
    }


    /* .backgroundImage {
            background: url(/Images/Passengerdetail.jpg) no-repeat;
            background-size: cover;
        } */
</style>
<body class="signup">
    @if (!string.IsNullOrEmpty(message))
    {
        <div class="alert alert-success" style="width:300px;margin-left:70%;">@message</div>
    }
    <div id="htmlContent">

        @* <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3"> *@
        <div style="width:30%;background-color:white;margin-top:3%;">

            <div>
                <b>@Html.Label("Reference Id :")</b>
                @Model.ReferenceId
            </div>
            <div>
                <b>@Html.Label("Bus Name :")</b>
                @Model.BusName
            </div>
            <div>
                <b>@Html.Label("Source :")</b>
                @Model.Source
            </div>
            <div>
                <b>@Html.Label("Destination :")</b>
                @Model.Destination
            </div>
            <div>
                <b>@Html.Label("Departure Date and time :")</b>
                @Model.Date
            </div>

        </div>
        @* </nav> *@


        <table id="CompletedJourny" class="table table-striped" style="width:70%;">
            <thead>
                <div style="width:18%;background-color:whitesmoke;border-radius:5px;margin-top:5%;">
                    <h4 style="color:black;font-weight:bolder">Passenger Details</h4>
                </div>
                <tr>
                    <th>SNo</th>
                    <th>Passenger Name</th>
                    <th>Age</th>
                    <th>Seat number</th>

                </tr>
            </thead>
            <tbody>

                @foreach (var item in Model.passengerLists)
                {

                    i++;
                    <tr>
                        <td>@i</td>
                        <td>@item.Name</td>
                        <td>@item.Age</td>
                        <td>@item.Seatno</td>


                    </tr>
                }
            </tbody>
        </table>
        <button type="submit" id="generatePDF" style="margin-left:25%;">Download Pdf</button>
        <button type="button" onclick="home()">Home</button>
    </div>
</body>
<script>
    function home()
    {
        location.href = "/BusSeatPrebook/UserDetailPage/";
    }
    setTimeout(function () {
        var messageElement = document.querySelector('.alert');
        if (messageElement) {
            messageElement.style.display = 'none';
        }
    }, 5000);

    var doc = new jsPDF();
    var specialElementHandlers = {
        '#editor': function (element, renderer) {
            return true;
        }
    };


    $('#generatePDF').click(function () {
        doc.fromHTML($('#htmlContent').html(), 15, 15, {
            'width': 700,
            'elementHandlers': specialElementHandlers
        });
        doc.save('BusTicket_file.pdf');
    });


</script>
